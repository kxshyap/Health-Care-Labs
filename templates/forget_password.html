{% extends 'base.html' %}
{% load static %}

{% block content %}

<br>
<!-- Messages Start-->
<div class='container'>
    {% if messages %}
    {% for message in messages %}
    <div class="alert alert-{{ message.tags }}">
        {{ message }}
    </div>
    {% endfor %}
    {% endif %}
</div>
<!-- Messages End-->

<div class="container">
    <div class="section-heading">
        <h2>Password Reset</h2>
        <div class="line"></div>
    </div>
    <form method="post">
        {% csrf_token %}
        <div class="row">
            <div class="col-lg-12">
                <input type="email" name="email" class="form-control" id="validationCustom01" placeholder="Your Email"
                    required>
            </div><br><br><br>
            <div class="col-md-6">
                <input type="text" name="fname" value="{{cuser.fname}}" class="form-control" id="validationCustom01"
                hidden><br>
            </div>
            <div class="col-md-6">
                <input type="text" name="lname" value="{{cuser.lname}}" class="form-control" id="validationCustom02"
                hidden><br>
            </div>

            <div class="col-md-6">
                <input type="text" name="uname" value="{{cuser.uname}}" class="form-control" id="validationCustom01"
                hidden>
            </div><br>
            <div class="col-md-6">
                <div class="input-group has-validation">
                    <input type="email" name="email" value="{{cuser.email}}" class="form-control"
                        id="validationCustomUsername" aria-describedby="inputGroupPrepend" hidden>
                </div><br>
            </div>
            <div class="col-md-6">
                <input type="text" name="city" value="{{cuser.city}}" class="form-control" id="validationCustom03"
                hidden><br>
            </div>
            <div class="col-md-6">
                <input type="text" name="zip" value="{{cuser.zip}}" class="form-control" id="validationCustom05"
                hidden><br>
            </div>
            <div class="col-md-6">
                <input type="text" name="mobile" value="{{cuser.mobile}}" class="form-control" id="validationCustom05"
                    hidden><br>
            </div>
            <div class="col-12">
                <center><button type="submit" class="btn dento-btn" name="generate_otp"
                        value="generate_otp">Submit</button></center>
            </div>
        </div><br>
    </form>
    <form method="post" onsubmit="return checkPassword()">
        {% csrf_token %}
        <div class="row">
            <div class="col-lg-12">
                <label for="exampleInputPassword1" class="form-label">OTP</label>
                <input type="text" name="otp" class="form-control" id="exampleInputPassword1" required><br>
            </div>
            <div class="col-lg-12">
                <label for="exampleInputPassword1" class="form-label">New Password</label>
                <input type="password" name="new_password" class="form-control" id="exampleInputPassword1" required><br>
            </div>
            <div class="col-lg-12">
                <label for="exampleInputPassword1" class="form-label">Confirm New Password</label>
                <input type="text" name="confirm_password" class="form-control" id="exampleInputPassword1" required><br>
            </div>
            <div class="col-12">
                <center><button type="submit" class="btn dento-btn" name="set_password" value="set_password">Set New
                        Password</button></center>
            </div><br><br>
        </div><br><br>
        <script>
            function checkPassword() {
                var password = document.getElementsByName("new_password")[0];
                var confirmPassword = document.getElementsByName("confirm_password")[0];

                if (password.value != confirmPassword.value) {
                    password.style.borderColor = "red";
                    confirmPassword.style.borderColor = "red";
                    // alert("Passwords do not match. Please try again.");
                    return false;
                } else {
                    password.style.borderColor = "";
                    confirmPassword.style.borderColor = "";
                }

                return true;
            }
        </script>
    </form>
</div>

{% endblock %}